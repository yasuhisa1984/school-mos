!function(C){var y,a={title:"Are you sure?",commit:"Confirm",commitClass:"btn-danger",cancel:"Cancel",cancelClass:"btn-default",fade:!0,verifyClass:"form-control",elements:["a[data-confirm]","button[data-confirm]","input[type=submit][data-confirm]"],focus:"commit",zIndex:1050,modalClass:!1,show:!0};if(window.dataConfirmModal={setDefaults:function(a){y=C.extend(y,a)},restoreDefaults:function(){y=C.extend({},a)},confirm:function(a){var e=n(a);e.spawn(),e.on("hidden.bs.modal",function(){e.remove()}),e.find(".commit").on("click",function(){a.onConfirm&&a.onConfirm.call&&a.onConfirm.call(),e.modal("hide")}),e.find(".cancel").on("click",function(){a.onCancel&&a.onCancel.call&&a.onCancel.call(),e.modal("hide")})}},dataConfirmModal.restoreDefaults(),C.fn.modal==undefined)throw new Error("The bootstrap modal plugin does not appear to be loaded.");if(C.fn.modal.Constructor==undefined)throw new Error("The bootstrap modal plugin does not have a Constructor ?!?");if(C.fn.modal.Constructor.VERSION==undefined)throw new Error("The bootstrap modal plugin does not have its version defined ?!?");var e=C.fn.modal.Constructor.VERSION,o=e.match(/^(\d)\./);if(!o)throw new Error("Cannot identify Bootstrap version. Version string: "+e);var w=parseInt(o[1]);if(3!=w&&4!=w)throw new Error("Unsupported bootstrap version: "+w+". data-confirm-modal supports version 3 and 4.");var t=function(a){var e={title:a.data("title")||a.attr("title")||a.data("original-title"),text:a.data("confirm"),focus:a.data("focus"),method:a.data("method"),modalClass:a.data("modal-class"),commit:a.data("commit"),commitClass:a.data("commit-class"),cancel:a.data("cancel"),cancelClass:a.data("cancel-class"),remote:a.data("remote"),verify:a.data("verify"),verifyRegexp:a.data("verify-regexp"),verifyLabel:a.data("verify-text"),verifyRegexpCaseInsensitive:a.data("verify-regexp-caseinsensitive"),backdrop:a.data("backdrop"),keyboard:a.data("keyboard"),show:a.data("show")},o=n(e);return o.find(".commit").on("click",function(){a.get(0).click(),o.modal("hide")}),o},n=function(e){var a,o="confirm-modal-"+String(Math.random()).slice(2,-1),t=y.fade?"fade":"",n=e.modalClass?e.modalClass:y.modalClass,i='<h5 id="'+o+'Label" class="modal-title"></h5> ',d='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>';switch(w){case 3:a=d+i;break;case 4:a=i+d}var r=C('<div id="'+o+'" class="modal '+n+" "+t+'" tabindex="-1" role="dialog" aria-labelledby="'+o+'Label" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header">'+a+'</div><div class="modal-body"></div><div class="modal-footer"><button class="btn cancel" data-dismiss="modal" aria-hidden="true"></button><button class="btn commit"></button></div></div></div></div>'),s=current=y.zIndex;C(".modal.in").not("#"+o).each(function(){current=parseInt(C(this).css("z-index"),10),current>s&&(s=current)}),r.css("z-index",parseInt(s)+1),r.find(".modal-title").text(e.title||y.title);var l=r.find(".modal-body");C.each((e.text||"").split(/\n{2}/),function(a,e){l.append(C("<p/>").html(e))});var c=r.find(".commit");c.text(e.commit||y.commit),c.addClass(e.commitClass||y.commitClass);var m,f=r.find(".cancel");if(f.text(e.cancel||y.cancel),f.addClass(e.cancelClass||y.cancelClass),e.remote&&c.attr("data-dismiss","modal"),e.verify||e.verifyRegexp){var u;if(c.prop("disabled",!0),e.verifyRegexp){var v=e.verifyRegexpCaseInsensitive,p=e.verifyRegexp,b=new RegExp(p,v?"i":"");u=function(a){return a.match(b)}}else u=function(a){return e.verify==a};var h=C("<input/>",{type:"text","class":y.verifyClass}).on("keyup",function(){c.prop("disabled",!u(C(this).val()))});r.on("shown.bs.modal",function(){h.focus()}),r.on("hidden.bs.modal",function(){h.val("").trigger("keyup")}),e.verifyLabel&&l.append(C("<p>",{text:e.verifyLabel})),l.append(h)}return m=e.focus?e.focus:"delete"==e.method?"cancel":y.focus,m=r.find("."+m),r.on("shown.bs.modal",function(){m.focus()}),C("body").append(r),r.spawn=function(){return r.modal(C.extend({},{backdrop:e.backdrop,keyboard:e.keyboard,show:e.show}))},r};if(C.fn.getConfirmModal=function(){var a=C(this),e=a.data("confirm-modal");return e||(e=t(a),a.data("confirm-modal",e)),e},C.fn.confirmModal=function(){var a=C(this).getConfirmModal();return a.spawn(),a},window.Rails||C.rails){var i=window.confirm;C(document).delegate(y.elements.join(", "),"confirm",function(){var a=C(this).getConfirmModal();return a.is(":visible")?(window.confirm=function(){return!0},a.one("hidden.bs.modal",function(){window.confirm=i}),!0):(a.spawn(),!1)})}}(jQuery);