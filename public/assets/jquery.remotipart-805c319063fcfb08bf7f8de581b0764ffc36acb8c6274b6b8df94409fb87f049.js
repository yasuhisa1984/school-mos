!function(l){"use strict";l.ajaxPrefilter(function(t){if(t.iframe)return"iframe"}),l.ajaxTransport("iframe",function(t,e,d){function s(){u.each(function(t){l(this).replaceWith(o[t]),u.splice(t,1)}),n.remove(),i.bind("load",function(){i.remove()}),i.attr("src","about:blank")}var a,n=null,i=null,r="iframe-"+l.now(),o=l(t.files).filter(":file:enabled"),u=null;if(t.dataTypes.shift(),o.length)return n=l("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:t.url,target:r}),"string"==typeof t.data&&0<t.data.length&&l.error("data must not be serialized"),l.each(t.data||{},function(t,e){l.isPlainObject(e)&&(t=e.name,e=e.value),l("<input type='hidden' />").attr({name:t,value:e}).appendTo(n)}),l("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(n),a=t.dataTypes[0]&&t.accepts[t.dataTypes[0]]?t.accepts[t.dataTypes[0]]+("*"!==t.dataTypes[0]?", */*; q=0.01":""):t.accepts["*"],l("<input type='hidden' name='X-Http-Accept'>").attr("value",a).appendTo(n),u=o.after(function(){return l(this).clone().prop("disabled",!0)}).next(),o.appendTo(n),{send:function(t,u){(i=l("<iframe src='about:blank' name='"+r+"' id='"+r+"' style='display:none'></iframe>")).bind("load",function(){i.unbind("load").bind("load",function(){var t=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,e=t.documentElement?t.documentElement:t.body,a=e.getElementsByTagName("textarea")[0],n=a&&a.getAttribute("data-type")||null,i=a&&a.getAttribute("data-status")||200,r=a&&a.getAttribute("data-statusText")||"OK",o={html:e.innerHTML,text:n?a.value:e?e.textContent||e.innerText:null};s(),d.responseText||(d.responseText=o.text),u(i,r,o,n?"Content-Type: "+n:null)}),n[0].submit()}),l("body").append(n,i)},abort:function(){null!==i&&(i.unbind("load").attr("src","javascript:false;"),s())}}})}(jQuery),function(d){var s;d.remotipart=s={setup:function(a){var i=a.data("ujs:submit-button"),r=d('meta[name="csrf-param"]').attr("content"),o=d('meta[name="csrf-token"]').attr("content"),u=a.find('input[name="'+r+'"]').length;a.one("ajax:beforeSend.remotipart",function(t,e,n){return delete n.beforeSend,n.iframe=!0,n.files=d(d.rails.fileInputSelector,a),n.data=a.serializeArray(),i&&n.data.push(i),n.files.each(function(t,e){for(var a=n.data.length-1;0<=a;a--)n.data[a].name==e.name&&n.data.splice(a,1)}),n.processData=!1,n.dataType===undefined&&(n.dataType="script *"),n.data.push({name:"remotipart_submitted",value:!0}),o&&r&&!u&&n.data.push({name:r,value:o}),d.rails.fire(a,"ajax:remotipartSubmit",[e,n])&&(d.rails.ajax(n).complete(function(t){d.rails.fire(a,"ajax:remotipartComplete",[t])}),setTimeout(function(){d.rails.disableFormElements(a)},20)),s.teardown(a),!1}).data("remotipartSubmitted",!0)},teardown:function(t){t.unbind("ajax:beforeSend.remotipart").removeData("remotipartSubmitted")}},d(document).on("ajax:aborted:file","form",function(){var t=d(this);return s.setup(t),d.rails.handleRemote(t),!1})}(jQuery);