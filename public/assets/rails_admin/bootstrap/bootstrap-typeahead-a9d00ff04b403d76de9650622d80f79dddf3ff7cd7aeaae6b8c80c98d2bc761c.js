!function(l){var d=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:l.isArray,isFunction:l.isFunction,isObject:l.isPlainObject,isUndefined:function(t){return void 0===t},toStr:function(t){return d.isUndefined(t)||null===t?"":t+""},bind:l.proxy,each:function(t,n){function e(t,e){return n(e,t)}l.each(t,e)},map:l.map,filter:l.grep,every:function(n,i){var r=!0;return n?(l.each(n,function(t,e){if(!(r=i.call(null,e,t,n)))return!1}),!!r):r},some:function(n,i){var r=!1;return n?(l.each(n,function(t,e){if(r=i.call(null,e,t,n))return!1}),!!r):r},mixin:l.extend,getUniqueId:(t=0,function(){return t++}),templatify:function(t){function e(){return String(t)}return l.isFunction(t)?t:e},defer:function(t){setTimeout(t,0)},debounce:function(r,s,o){var u,a;return function(){var t,e,n=this,i=arguments;return t=function(){u=null,o||(a=r.apply(n,i))},e=o&&!u,clearTimeout(u),u=setTimeout(t,s),e&&(a=r.apply(n,i)),a}},throttle:function(n,i){var r,s,o,u,a,c;return a=0,c=function(){a=new Date,o=null,u=n.apply(r,s)},function(){var t=new Date,e=i-(t-a);return r=this,s=arguments,e<=0?(clearTimeout(o),o=null,a=t,u=n.apply(r,s)):o||(o=setTimeout(c,e)),u}},noop:function(){}};var t}(),i="0.10.5",o=function(){"use strict";function t(t){return(t=d.toStr(t))?t.split(/\s+/):[]}function e(t){return(t=d.toStr(t))?t.split(/\W+/):[]}function n(i){return function(){var t=[].slice.call(arguments,0);return function(e){var n=[];return d.each(t,function(t){n=n.concat(i(d.toStr(e[t])))}),n}}}return{nonword:e,whitespace:t,obj:{nonword:n(e),whitespace:n(t)}}}(),r=function(){"use strict";function t(t){this.maxSize=d.isNumber(t)?t:100,this.reset(),this.maxSize<=0&&(this.set=this.get=l.noop)}function e(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return d.mixin(t.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new r(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new e}}),d.mixin(e.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),t}(),u=function(){"use strict";function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+d.escapeRegExChars(this.prefix))}function i(){return(new Date).getTime()}function r(t){return JSON.stringify(d.isUndefined(t)?null:t)}function n(t){return JSON.parse(t)}var s,e;try{(s=window.localStorage).setItem("~~~","!"),s.removeItem("~~~")}catch(o){s=null}return e=s&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),n(s.getItem(this._prefix(t)))},set:function(t,e,n){return d.isNumber(n)?s.setItem(this._ttlKey(t),r(i()+n)):s.removeItem(this._ttlKey(t)),s.setItem(this._prefix(t),r(e))},remove:function(t){return s.removeItem(this._ttlKey(t)),s.removeItem(this._prefix(t)),this},clear:function(){var t,e,n=[],i=s.length;for(t=0;t<i;t++)(e=s.key(t)).match(this.keyMatcher)&&n.push(e.replace(this.keyMatcher,""));for(t=n.length;t--;)this.remove(n[t]);return this},isExpired:function(t){var e=n(s.getItem(this._ttlKey(t)));return!!(d.isNumber(e)&&i()>e)}}:{get:d.noop,set:d.noop,remove:d.noop,clear:d.noop,isExpired:d.noop},d.mixin(t.prototype,e),t}(),a=function(){"use strict";function t(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?e(t.transport):l.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=!1===t.cache?new r(0):n}function e(s){return function(t,e){function n(t){d.defer(function(){r.resolve(t)})}function i(t){d.defer(function(){r.reject(t)})}var r=l.Deferred();return s(t,e,n,i),r}}var a=0,c={},h=6,n=new r(10);return t.setMaxPendingRequests=function(t){h=t},t.resetCache=function(){n.reset()},d.mixin(t.prototype,{_get:function(e,t,n){function i(t){n&&n(null,t),u._cache.set(e,t)}function r(){n&&n(!0)}function s(){a--,delete c[e],u.onDeckRequestArgs&&(u._get.apply(u,u.onDeckRequestArgs),u.onDeckRequestArgs=null)}var o,u=this;this.cancelled||e!==this.lastUrl||((o=c[e])?o.done(i).fail(r):a<h?(a++,c[e]=this._send(e,t).done(i).fail(r).always(s)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(t,e,n){var i;return d.isFunction(e)&&(n=e,e={}),this.cancelled=!1,this.lastUrl=t,(i=this._cache.get(t))?d.defer(function(){n&&n(null,i)}):this._get(t,e,n),!!i},cancel:function(){this.cancelled=!0}}),t}(),c=function(){"use strict";function t(t){(t=t||{}).datumTokenizer&&t.queryTokenizer||l.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function n(t){return t=d.filter(t,function(t){return!!t}),t=d.map(t,function(t){return t.toLowerCase()})}function o(){return{ids:[],children:{}}}function i(t){for(var e={},n=[],i=0,r=t.length;i<r;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function u(t,e){function n(t,e){return t-e}var i=0,r=0,s=[];t=t.sort(n),e=e.sort(n);for(var o=t.length,u=e.length;i<o&&r<u;)t[i]<e[r]?i++:(t[i]>e[r]||(s.push(t[i]),i++),r++);return s}return d.mixin(t.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var s=this;t=d.isArray(t)?t:[t],d.each(t,function(t){var r,e;r=s.datums.push(t)-1,e=n(s.datumTokenizer(t)),d.each(e,function(t){var e,n,i;for(e=s.trie,n=t.split("");i=n.shift();)(e=e.children[i]||(e.children[i]=o())).ids.push(r)})})},get:function(t){var e,s,o=this;return e=n(this.queryTokenizer(t)),d.each(e,function(t){var e,n,i,r;if(s&&0===s.length)return!1;for(e=o.trie,n=t.split("");e&&(i=n.shift());)e=e.children[i];if(!e||0!==n.length)return s=[],!1;r=e.ids.slice(0),s=s?u(s,r):r}),s?d.map(i(s),function(t){return o.datums[t]}):[]},reset:function(){this.datums=[],this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),t}(),h=function(){"use strict";function t(t){return t.local||null}function e(t){var e,n;return n={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(e=t.prefetch||null)&&(e=d.isString(e)?{url:e}:e,(e=d.mixin(n,e)).thumbprint=i+e.thumbprint,e.ajax.type=e.ajax.type||"GET",e.ajax.dataType=e.ajax.dataType||"json",!e.url&&l.error("prefetch requires url to be set")),e}function n(t){function e(e){return function(t){return d.debounce(t,e)}}function n(e){return function(t){return d.throttle(t,e)}}var i,r;return r={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(i=t.remote||null)&&(i=d.isString(i)?{url:i}:i,(i=d.mixin(r,i)).rateLimiter=/^throttle$/i.test(i.rateLimitBy)?n(i.rateLimitWait):e(i.rateLimitWait),i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",delete i.rateLimitBy,delete i.rateLimitWait,!i.url&&l.error("remote requires url to be set")),i}return{local:t,prefetch:e,remote:n}}();!function(t){"use strict";function e(t){t&&(t.local||t.prefetch||t.remote)||l.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=n(t.sorter),this.dupDetector=t.dupDetector||i,this.local=h.local(t),this.prefetch=h.prefetch(t),this.remote=h.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new c({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new u(this.cacheKey):null}function n(e){function t(t){return t.sort(e)}function n(t){return t}return d.isFunction(e)?t:n}function i(){return!1}var r,s;r=t.Bloodhound,s={data:"data",protocol:"protocol",thumbprint:"thumbprint"},(t.Bloodhound=e).noConflict=function(){return t.Bloodhound=r,e},e.tokenizers=o,d.mixin(e.prototype,{_loadPrefetch:function(e){function t(t){r.clear(),r.add(e.filter?e.filter(t):t),r._saveToStorage(r.index.serialize(),e.thumbprint,e.ttl)}var n,i,r=this;return(n=this._readFromStorage(e.thumbprint))?(this.index.bootstrap(n),i=l.Deferred().resolve()):i=l.ajax(e.url,e.ajax).done(t),i},_getFromRemote:function(t,n){function e(t,e){n(t?[]:s.remote.filter?s.remote.filter(e):e)}var i,r,s=this;if(this.transport)return t=t||"",r=encodeURIComponent(t),i=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,r),this.transport.get(i,this.remote.ajax,e)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(t,e,n){this.storage&&(this.storage.set(s.data,t,n),this.storage.set(s.protocol,location.protocol,n),this.storage.set(s.thumbprint,e,n))},_readFromStorage:function(t){var e,n={};return this.storage&&(n.data=this.storage.get(s.data),n.protocol=this.storage.get(s.protocol),n.thumbprint=this.storage.get(s.thumbprint)),e=n.thumbprint!==t||n.protocol!==location.protocol,n.data&&!e?n.data:null},_initialize:function(){function t(){n.add(d.isFunction(i)?i():i)}var e,n=this,i=this.local;return e=this.prefetch?this._loadPrefetch(this.prefetch):l.Deferred().resolve(),i&&e.done(t),this.transport=this.remote?new a(this.remote):null,this.initPromise=e.promise()},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){this.index.add(t)},get:function(t,e){function n(t){var n=r.slice(0);d.each(t,function(e){return!d.some(n,function(t){return i.dupDetector(e,t)})&&n.push(e),n.length<i.limit}),e&&e(i.sorter(n))}var i=this,r=[],s=!1;r=this.index.get(t),(r=this.sorter(r).slice(0,this.limit)).length<this.limit?s=this._getFromRemote(t,n):this._cancelLastRemoteRequest(),s||(0<r.length||!this.transport)&&e&&e(r)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&a.resetCache()},ttAdapter:function(){return d.bind(this.get,this)}})}(this);var p={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},f=function(){"use strict";var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return d.isMsie()&&d.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),d.isMsie()&&d.isMsie()<=7&&d.mixin(t.input,{marginTop:"-1px"}),t}(),g=function(){"use strict";function t(t){t&&t.el||l.error("EventBus initialized without el"),this.$el=l(t.el)}var n="typeahead:";return d.mixin(t.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(n+t,e)}}),t}(),m=function(){"use strict";function i(t,e,n,i){var r;if(!n)return this;for(e=e.split(a),n=i?u(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function t(t,e,n){return i.call(this,"async",t,e,n)}function e(t,e,n){return i.call(this,"sync",t,e,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(a);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,s;if(!this._callbacks)return this;for(t=t.split(a),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=o(n.sync,this,[e].concat(i)),s=o(n.async,this,[e].concat(i)),r()&&c(s);return this}function o(i,r,s){function t(){for(var t,e=0,n=i.length;!t&&e<n;e+=1)t=!1===i[e].apply(r,s);return!t}return t}function s(){return window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function u(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var a=/\s+/,c=s();return{onSync:e,onAsync:t,off:n,trigger:r}}(),y=function(u){"use strict";function e(t,e,n){for(var i,r=[],s=0,o=t.length;s<o;s++)r.push(d.escapeRegExChars(t[s]));return i=n?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",e?new RegExp(i):new RegExp(i,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function t(t){var e,n,i;return(e=o.exec(t.data))&&(i=u.createElement(r.tagName),r.className&&(i.className=r.className),(n=t.splitText(e.index)).splitText(e[0].length),i.appendChild(n.cloneNode(!0)),t.parentNode.replaceChild(i,n)),!!e}function s(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)(n=t.childNodes[r]).nodeType===i?r+=e(n)?1:0:s(n,e)}var o;(r=d.mixin({},n,r)).node&&r.pattern&&(r.pattern=d.isArray(r.pattern)?r.pattern:[r.pattern],o=e(r.pattern,r.caseSensitive,r.wordsOnly),s(r.node,t))}}(window.document),v=function(){"use strict";function n(t){var e,n,i,r,s=this;(t=t||{}).input||l.error("input is missing"),e=d.bind(this._onBlur,this),n=d.bind(this._onFocus,this),i=d.bind(this._onKeydown,this),r=d.bind(this._onInput,this),this.$hint=l(t.hint),this.$input=l(t.input).on("blur.tt",e).on("focus.tt",n).on("keydown.tt",i),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=d.noop),d.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){u[t.which||t.keyCode]||d.defer(d.bind(s._onInput,s,t))}):this.$input.on("input.tt",r),this.query=this.$input.val(),this.$overflowHelper=o(this.$input)}function o(t){return l('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function i(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var u;return u={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},d.mixin(n.prototype,m,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=u[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var n,i,r;switch(t){case"tab":i=this.getHint(),r=this.getInputValue(),n=i&&i!==r&&!s(e);break;case"up":case"down":n=!s(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!s(e);break;default:n=!0}return n},_checkInputValue:function(){var t,e,n;n=!!(e=i(t=this.getInputValue(),this.query))&&this.query.length!==t.length,this.query=t,e?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n;n=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),!(""!==t&&n&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,e,n;return t=this.$input.val().length,e=this.$input[0].selectionStart,d.isNumber(e)?e===t:!document.selection||((n=document.selection.createRange()).moveStart("character",-t),t===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),n=function(){"use strict";function t(t){(t=t||{}).templates=t.templates||{},t.source||l.error("missing source"),t.name&&!i(t.name)&&l.error("invalid dataset name: "+t.name),this.query=null,this.highlight=!!t.highlight,this.name=t.name||d.getUniqueId(),this.source=t.source,this.displayFn=e(t.display||t.displayKey),this.templates=n(t.templates,this.displayFn),this.$el=l(p.dataset.replace("%CLASS%",this.name))}function e(e){function t(t){return t[e]}return e=e||"value",d.isFunction(e)?e:t}function n(t,e){function n(t){return"<p>"+e(t)+"</p>"}return{empty:t.empty&&d.templatify(t.empty),header:t.header&&d.templatify(t.header),footer:t.footer&&d.templatify(t.footer),suggestion:t.suggestion||n}}function i(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var a="ttDataset",c="ttValue",h="ttDatum";return t.extractDatasetName=function(t){return l(t).data(a)},t.extractValue=function(t){return l(t).data(c)},t.extractDatum=function(t){return l(t).data(h)},d.mixin(t.prototype,m,{_render:function(i,r){function t(){return u.templates.empty({query:i,isEmpty:!0})}function e(){function t(t){var e;return(e=l(p.suggestion).append(u.templates.suggestion(t)).data(a,u.name).data(c,u.displayFn(t)).data(h,t)).children().each(function(){l(this).css(f.suggestionChild)}),e}var e,n;return e=l(p.suggestions).css(f.suggestions),n=d.map(r,t),e.append.apply(e,n),u.highlight&&y({className:"tt-highlight",node:e[0],pattern:i}),e}function n(){return u.templates.header({query:i,isEmpty:!o})}function s(){return u.templates.footer({query:i,isEmpty:!o})}if(this.$el){var o,u=this;this.$el.empty(),!(o=r&&r.length)&&this.templates.empty?this.$el.html(t()).prepend(u.templates.header?n():null).append(u.templates.footer?s():null):o&&this.$el.html(e()).prepend(u.templates.header?n():null).append(u.templates.footer?s():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),t}(),_=function(){"use strict";function t(t){var e,n,i,r=this;(t=t||{}).menu||l.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=d.map(t.datasets,s),e=d.bind(this._onSuggestionClick,this),n=d.bind(this._onSuggestionMouseEnter,this),i=d.bind(this._onSuggestionMouseLeave,this),this.$menu=l(t.menu).on("click.tt",".tt-suggestion",e).on("mouseenter.tt",".tt-suggestion",n).on("mouseleave.tt",".tt-suggestion",i),d.each(this.datasets,function(t){r.$menu.append(t.getRoot()),t.onSync("rendered",r._onRendered,r)})}function s(t){return new n(t)}return d.mixin(t.prototype,m,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",l(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(l(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=d.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,n,i,r;this.isOpen&&(n=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),-1!==(i=((i=e.index(n)+t)+1)%(e.length+1)-1)?(i<-1&&(i=e.length-1),this._setCursor(r=e.eq(i)),this._ensureVisible(r)):this.trigger("cursorRemoved"))},_ensureVisible:function(t){var e,n,i,r;n=(e=t.position().top)+t.outerHeight(!0),i=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),e<0?this.$menu.scrollTop(i+e):r<n&&this.$menu.scrollTop(i+(n-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?f.ltr:f.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:n.extractDatum(t),value:n.extractValue(t),datasetName:n.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function t(t){t.update(e)}d.each(this.datasets,t)},empty:function(){function t(t){t.clear()}d.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,d.each(this.datasets,t)}}),t}(),s=function(){"use strict";function t(t){var r,s,e;(t=t||{}).input||l.error("missing input"),this.isActivated=!1,this.autoselect=!!t.autoselect,this.minLength=d.isNumber(t.minLength)?t.minLength:1,this.$node=n(t.input,t.withHint),r=this.$node.find(".tt-dropdown-menu"),s=this.$node.find(".tt-input"),e=this.$node.find(".tt-hint"),s.on("blur.tt",function(t){var e,n,i;e=document.activeElement,n=r.is(e),i=0<r.has(e).length,d.isMsie()&&(n||i)&&(t.preventDefault(),t.stopImmediatePropagation(),d.defer(function(){s.focus()}))}),r.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=t.eventBus||new g({el:s}),this.dropdown=new _({menu:r,datasets:t.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new v({input:s,hint:e}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function n(t,e){var n,i,r,s;n=l(t),i=l(p.wrapper).css(f.wrapper),r=l(p.dropdown).css(f.dropdown),(s=n.clone().css(f.hint).css(u(n))).val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),n.data(a,{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(e?f.input:f.inputWithNoHint);try{!n.attr("dir")&&n.attr("dir","auto")}catch(o){}return n.wrap(i).parent().prepend(e?s:null).append(r)}function u(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function e(t){var n=t.find(".tt-input");d.each(n.data(a),function(t,e){d.isUndefined(t)?n.removeAttr(e):n.attr(e,t)}),n.detach().removeData(a).removeClass("tt-input").insertAfter(t),t.remove()}var a="ttAttrs";return d.mixin(t.prototype,{_onSuggestionClicked:function(t,e){var n;(n=this.dropdown.getDatumForSuggestion(e))&&this._select(n)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,e){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),e.preventDefault()):this.autoselect&&i&&(this._select(i),e.preventDefault())},_onTabKeyed:function(t,e){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,e,n,i,r;(t=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(e=this.input.getInputValue(),n=v.normalizeQuery(e),i=d.escapeRegExChars(n),(r=new RegExp("^(?:"+i+")(.+$)","i").exec(t.value))?this.input.setHint(e+r[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,n,i,r;e=this.input.getHint(),n=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),e&&n!==e&&i&&((r=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.raw,r.datasetName))},_select:function(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),d.defer(d.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=d.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),e(this.$node),this.$node=null}}),t}();!function(){"use strict";var t,r,n;t=l.fn.typeahead,r="ttTypeahead",n={initialize:function(n,i){function t(){var t,e=l(this);d.each(i,function(t){t.highlight=!!n.highlight}),t=new s({input:e,eventBus:new g({el:e}),withHint:!!d.isUndefined(n.hint)||!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:i}),e.data(r,t)}return i=d.isArray(i)?i:[].slice.call(arguments,1),n=n||{},this.each(t)},open:function(){function t(){var t;(t=l(this).data(r))&&t.open()}return this.each(t)},close:function(){function t(){var t;(t=l(this).data(r))&&t.close()}return this.each(t)},val:function(e){function t(){var t;(t=l(this).data(r))&&t.setVal(e)}function n(t){var e,n;return(e=t.data(r))&&(n=e.getVal()),n}return arguments.length?this.each(t):n(this.first())},destroy:function(){function t(){var t,e=l(this);(t=e.data(r))&&(t.destroy(),e.removeData(r))}return this.each(t)}},l.fn.typeahead=function(t){var e;return n[t]&&"initialize"!==t?(e=this.filter(function(){return!!l(this).data(r)}),n[t].apply(e,[].slice.call(arguments,1))):n.initialize.apply(this,arguments)},l.fn.typeahead.noConflict=function(){return l.fn.typeahead=t,this}}()}(window.jQuery);