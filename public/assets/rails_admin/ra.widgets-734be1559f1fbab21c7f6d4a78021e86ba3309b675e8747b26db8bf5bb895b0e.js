(function(){$(document).on("rails_admin.dom_ready",function(t,e){var i,n,a,o,r,d,s,l,c,h,f;if((e=e||$("form")).length&&(e.find("[data-color]").each(function(){var i;return i=this,$(this).ColorPicker({color:$(i).val(),onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,e){return $(i).val(e),$(i).css("backgroundColor","#"+e)}})}),$.fn.datetimepicker.defaults.icons={time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-angle-double-left",next:"fa fa-angle-double-right",today:"fa fa-dot-circle-o",clear:"fa fa-trash",close:"fa fa-times"},e.find("[data-datetimepicker]").each(function(){var t;return t=$(this).data("options"),$.extend(t,{locale:RailsAdmin.I18n.locale}),$(this).datetimepicker(t)}),e.find("[data-enumeration]").each(function(){return $(this).is("[multiple]")?$(this).filteringMultiselect($(this).data("options")):$(this).filteringSelect($(this).data("options"))}),e.find("[data-fileupload]").each(function(){var t;return $(t=this).on("click",".delete input[type='checkbox']",function(){return $(t).children(".toggle").toggle("slow")})}),e.find("[data-fileupload]").change(function(){var t,e,i,n;return i=this,(e=$("#"+i.id).parent().children(".preview")).length||(e=$("#"+i.id).parent().prepend($("<img />").addClass("preview").addClass("img-thumbnail")).find("img.preview")).parent().find("img:not(.preview)").hide(),t=$("#"+i.id).val().split(".").pop().toLowerCase(),i.files&&i.files[0]&&-1!==$.inArray(t,["gif","png","jpg","jpeg","bmp"])?((n=new FileReader).onload=function(t){return e.attr("src",t.target.result)},n.readAsDataURL(i.files[0]),e.show()):e.hide()}),e.find("[data-filteringmultiselect]").each(function(){return $(this).filteringMultiselect($(this).data("options")),$(this).parents("#modal").length?$(this).siblings(".btn").remove():$(this).parents(".control-group").first().remoteForm()}),e.find("[data-filteringselect]").each(function(){return $(this).filteringSelect($(this).data("options")),$(this).parents("#modal").length?$(this).siblings(".btn").remove():$(this).parents(".control-group").first().remoteForm()}),e.find("[data-nestedmany]").each(function(){var t,e,i,n;return t=$(this).parents(".control-group").first(),e=t.find("> .controls > .nav"),i=t.find("> .tab-content"),n=t.find("> .controls > .btn-group > .toggler"),i.children(".fields:not(.tab-pane)").addClass("tab-pane").each(function(){return $(this).attr("id","unique-id-"+(new Date).getTime()+Math.floor(1e5*Math.random())),e.append('<li><a data-toggle="tab" href="#'+this.id+'">'+$(this).children(".object-infos").data("object-label")+"</a></li>")}),0===e.find("> li.active").length&&e.find("> li > a[data-toggle='tab']:first").tab("show"),0===e.children().length?(e.hide(),i.hide(),n.addClass("disabled").removeClass("active").children("i").addClass("icon-chevron-right")):n.hasClass("active")?(e.show(),i.show(),n.children("i").addClass("icon-chevron-down")):(e.hide(),i.hide(),n.children("i").addClass("icon-chevron-right"))}),e.find("[data-nestedone]").each(function(){var t,e,i,n,a;return t=$(this).parents(".control-group").first(),i=t.find("> .controls > .nav"),n=t.find("> .tab-content"),a=t.find("> .controls > .btn-group > .toggler"),n.children(".fields:not(.tab-pane)").addClass("tab-pane active").each(function(){return t.find("> .controls .add_nested_fields").removeClass("add_nested_fields").html($(this).children(".object-infos").data("object-label")),i.append('<li><a data-toggle="tab" href="#'+this.id+'">'+$(this).children(".object-infos").data("object-label")+"</a></li>")}),(e=i.find("> li > a[data-toggle='tab']:first")).tab("show"),t.find("> .controls > [data-target]:first").html('<i class="icon-white"></i> '+e.html()),i.hide(),0===i.children().length?(i.hide(),n.hide(),a.addClass("disabled").removeClass("active").children("i").addClass("icon-chevron-right")):a.hasClass("active")?(a.children("i").addClass("icon-chevron-down"),n.show()):(a.children("i").addClass("icon-chevron-right"),n.hide())}),e.find("[data-polymorphic]").each(function(){var t,e,i,n;return t=(i=$(this)).parents(".control-group").first(),e=t.find("select").last(),n=i.data("urls"),i.on("change",function(){return""===$(this).val()?e.html('<option value=""></option>'):$.ajax({url:n[i.val()],data:{compact:!0,all:!0},beforeSend:function(t){return t.setRequestHeader("Accept","application/json")},success:function(t){var n;return n=$("<option></option>"),$(t).each(function(t,e){var i;return(i=$("<option></option>")).attr("value",e.id),i.text(e.label),n=n.add(i)}),e.html(n)}})})}),l=function(){return e.find("[data-richtext=simplemde]").not(".simplemded").each(function(){var t;return t=$(this).data("options").instance_config,new window.SimpleMDE($.extend(!0,{element:document.getElementById(this.id),autosave:{uniqueId:this.id}},t)),$(this).addClass("simplemded")})},(i=e.find("[data-richtext=simplemde]").not(".simplemded")).length&&(window.SimpleMDE?l():(c=i.first().data("options"),$("head").append('<link href="'+c.css_location+'" rel="stylesheet" media="all" type="text/css">'),$.getScript(c.js_location,function(){return l()}))),r=function(){return e.find("[data-richtext=ckeditor]").not(".ckeditored").each(function(){var t;try{(t=window.CKEDITOR.instances[this.id])&&t.destroy(!0)}catch(e){}return window.CKEDITOR.replace(this,$(this).data("options")),$(this).addClass("ckeditored")})},(i=e.find("[data-richtext=ckeditor]").not(".ckeditored")).length&&(window.CKEDITOR?r():(c=i.first().data("options"),window.CKEDITOR_BASEPATH=c.base_location,$.getScript(c.jspath,function(){return r()}))),d=function(t){return t.each(function(){var t;return c=$(this).data("options"),t=this,$.getScript(c.locations.mode,function(){return $("head").append('<link href="'+c.locations.theme+'" rel="stylesheet" media="all" type="text/css">'),CodeMirror.fromTextArea(t,c.options),$(t).addClass("codemirrored")})})},(n=e.find("[data-richtext=codemirror]").not(".codemirrored")).length&&(this.array=n,window.CodeMirror?d(this.array):(c=$(n[0]).data("options"),$("head").append('<link href="'+c.csspath+'" rel="stylesheet" media="all" type="text/css">'),$.getScript(c.jspath,(f=this,function(){return d(f.array)})))),o=function(t,e){return t.each(function(){return $(this).addClass("bootstrap-wysihtml5ed"),$(this).closest(".controls").addClass("well"),$(this).wysihtml5(e)})},(n=e.find("[data-richtext=bootstrap-wysihtml5]").not(".bootstrap-wysihtml5ed")).length&&(this.array=n,c=$(n[0]).data("options"),a=$.parseJSON(c.config_options),window.wysihtml5?o(this.array,a):($("head").append('<link href="'+c.csspath+'" rel="stylesheet" media="all" type="text/css">'),$.getScript(c.jspath,(h=this,function(){return o(h.array,a)})))),s=function(t){return t.each(function(){var t;if(c=$(this).data("options"),(a=$.parseJSON(c.config_options))?a.inlineMode||(a.inlineMode=!1):a={inlineMode:!1},t=a.imageUploadURL?a.imageUploadParams={authenticity_token:$("meta[name=csrf-token]").attr("content")}:void 0,$(this).addClass("froala-wysiwyged"),$(this).editable(a),t)return $(this).on("editable.imageError",function(t,e,i){alert("error uploading image: "+i.message),0===i.code||1===i.code||2===i.code||3===i.code||4===i.code||5===i.code||6===i.code||i.code}).on("editable.afterRemoveImage",function(t,e,i){e.options.imageDeleteParams={src:i.attr("src"),authenticity_token:$("meta[name=csrf-token]").attr("content")},e.deleteImage(i)}).on("editable.imageDeleteSuccess",function(){}).on("editable.imageDeleteError",function(t,e,i){return alert("error deleting image: "+i.message)})})},(n=e.find("[data-richtext=froala-wysiwyg]").not(".froala-wysiwyged")).length))return c=$(n[0]).data("options"),$.isFunction($.fn.editable)?s(n):($("head").append('<link href="'+c.csspath+'" rel="stylesheet" media="all" type="text/css">'),$.getScript(c.jspath,function(){return s(n)}))})}).call(this);